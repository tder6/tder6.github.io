我们要使 $k$ 尽可能大，最大即为 $k=n$，此时每次操作会将序列 $\\{a_n\\}$ 中的所有数同乘，因此不会影响 $a_i$ 之间的大小关系。要使得其满足对于 $1\\le i<j\\le n$ 都有 $a_i=a_j$，则当且仅当初始时满足条件才符合。

而后，我们不妨再取 $k=n-1$，此时将 $n-1$ 个数同乘 $p$，因为我们只考虑相对的大小关系，因此相当于将剩下那个数除以 $p$。有了上面的思考，我们便有策略：

- 选定 $k=n-1$；
- 共操作 $n$ 次；
- 第 $i$ 次操作时，将除 $a_i$ 外的所有元素同乘 $a_i$，这一操作相当于将 $a_i$ 除以 $a_i$，即变为 $1$。

最终相当于所有 $a_i$ 均为 $1$，即相等。

你也可以这么理解，进行如上操作后所有的 $a_i$ 均为 $\\displaystyle\\prod_{j=1}^n a_j$。

---

```python
t = int(input())
while t:
    n = int(input())
    a = input().split()
    b = 1
    for i in range(1, n):
        if(a[i] != a[i - 1]):
            print(n - 1)
            b = 0
            break
    if b:
        print(n)
    t = t - 1
```